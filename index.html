<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#e74c3c">
    <title>Boss SY-1 Tuner</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="audio-indicator" id="audio-indicator"></div>
    
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header>
            <h1><i class="fas fa-guitar"></i> Boss SY-1 Preset Tuner</h1>
            <p class="subtitle">Real-time –Ω–∞—Å—Ç—Ä–æ–π—â–∏–∫ –ø—Ä–µ—Å–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ –º–∏–∫—Ä–æ—Ñ–æ–Ω</p>
        </header>

        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
        <section class="instruction-box">
            <h3>üì¢ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</h3>
            <ol>
                <li>–í–∫–ª—é—á–∏—Ç–µ —É—Å–∏–ª–∏—Ç–µ–ª—å –Ω–∞ —Å—Ä–µ–¥–Ω–µ–π –≥—Ä–æ–º–∫–æ—Å—Ç–∏</li>
                <li>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ—Å–µ—Ç –Ω–∏–∂–µ</li>
                <li>–ù–∞–∂–º–∏—Ç–µ "–í–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω" –∏ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø</li>
                <li>–°—ã–≥—Ä–∞–π—Ç–µ –Ω–∞ –≥–∏—Ç–∞—Ä–µ - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∂–µ—Ç –Ω–æ—Ç—É</li>
                <li>–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ —Ä—É—á–∫–∏ Boss SY-1 –ø–æ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º</li>
            </ol>
        </section>

        <!-- –í—ã–±–æ—Ä –ø—Ä–µ—Å–µ—Ç–∞ -->
        <section class="preset-selector">
            <label for="preset-select">
                <i class="fas fa-list"></i> –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ—Å–µ—Ç:
            </label>
            <select id="preset-select">
                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ—Å–µ—Ç --</option>
            </select>
            <div id="preset-description" class="preset-description"></div>
        </section>

        <!-- –ê—É–¥–∏–æ –∫–æ–Ω—Ç—Ä–æ–ª—å -->
        <section class="audio-control">
            <button id="start-audio" class="btn-primary">
                <i class="fas fa-microphone"></i> –í–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω
            </button>
            <button id="test-sound" class="btn-secondary" style="display: none;">
                <i class="fas fa-volume-up"></i> –¢–µ—Å—Ç –∑–≤—É–∫–∞ (440 Hz)
            </button>
            <div id="audio-status" class="status-off">
                <i class="fas fa-circle"></i> –ú–∏–∫—Ä–æ—Ñ–æ–Ω –≤—ã–∫–ª—é—á–µ–Ω
            </div>
        </section>

        <!-- –î–µ—Ç–µ–∫—Ç–æ—Ä –Ω–æ—Ç—ã -->
        <section class="note-detector">
            <h2>üéµ –ê–Ω–∞–ª–∏–∑ –∑–≤—É–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</h2>
            
            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—Ä–æ–≤–Ω—è —Å–∏–≥–Ω–∞–ª–∞ -->
            <div class="volume-meter">
                <label>üìä –£—Ä–æ–≤–µ–Ω—å –≤—Ö–æ–¥—è—â–µ–≥–æ —Å–∏–≥–Ω–∞–ª–∞:</label>
                <div class="volume-bar-container">
                    <div class="volume-bar">
                        <div id="volume-fill" class="volume-fill"></div>
                    </div>
                    <div class="volume-threshold">
                        <span class="threshold-line" title="–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è">–ü–æ—Ä–æ–≥</span>
                    </div>
                </div>
                <div class="volume-info">
                    <div class="volume-stats">
                        <span id="volume-text" class="volume-value">0%</span>
                        <span id="volume-db" class="volume-db">-‚àû dB</span>
                    </div>
                    <span id="signal-status" class="signal-status">–ñ–¥—É —Å–∏–≥–Ω–∞–ª...</span>
                </div>
                <div class="volume-help">
                    üí° –°–æ–≤–µ—Ç: –°—ã–≥—Ä–∞–π—Ç–µ –≥—Ä–æ–º–∫–æ –Ω–∞ –≥–∏—Ç–∞—Ä–µ. –ó–µ–ª—ë–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–ø–æ–ª–Ω–∏—Ç—å—Å—è –º–∏–Ω–∏–º—É–º –Ω–∞ 5-10%
                </div>
            </div>

            <!-- –î–∏—Å–ø–ª–µ–π –Ω–æ—Ç—ã -->
            <div class="note-display">
                <div class="note-box">
                    <label>–ù–æ—Ç–∞:</label>
                    <div id="detected-note" class="note-value">--</div>
                    <div id="note-confidence" class="note-confidence">–¢–æ—á–Ω–æ—Å—Ç—å: --%</div>
                </div>
                <div class="freq-box">
                    <label>–ß–∞—Å—Ç–æ—Ç–∞:</label>
                    <div id="frequency" class="frequency-value">-- Hz</div>
                    <div id="freq-range" class="freq-range">–î–∏–∞–ø–∞–∑–æ–Ω: 82-1200 Hz</div>
                </div>
            </div>
            
            <!-- –§–æ—Ä–º–∞ –≤–æ–ª–Ω—ã -->
            <div class="waveform-container">
                <label>üåä –§–æ—Ä–º–∞ –≤–æ–ª–Ω—ã:</label>
                <canvas id="waveform" width="800" height="150"></canvas>
                <div class="waveform-status" id="waveform-status">
                    –û–∂–∏–¥–∞–Ω–∏–µ –∑–≤—É–∫–∞...
                </div>
            </div>

            <!-- –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä -->
            <div class="spectrum-container">
                <label>üìà –°–ø–µ–∫—Ç—Ä —á–∞—Å—Ç–æ—Ç:</label>
                <canvas id="spectrum" width="800" height="150"></canvas>
            </div>
            
            <!-- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="debug-info">
                <div class="debug-header">
                    <h3>üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:</h3>
                    <button id="clear-debug" class="btn-clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
                <div id="debug-output" class="debug-output"></div>
            </div>

            <!-- –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="system-info">
                <h3>üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ:</h3>
                <div id="system-output"></div>
            </div>
        </section>

        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ -->
        <section class="parameters">
            <h2>üéõÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</h2>
            
            <!-- TYPE -->
            <div class="parameter-group">
                <div class="param-header">
                    <h3>1Ô∏è‚É£ TYPE Selector</h3>
                </div>
                <div class="param-values">
                    <div class="value-box">
                        <label>–¢–µ–∫—É—â–∏–π:</label>
                        <div id="current-type" class="value">LEAD 1</div>
                    </div>
                    <div class="arrow-indicator" id="type-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                    <div class="value-box target">
                        <label>–¶–µ–ª–µ–≤–æ–π:</label>
                        <div id="target-type" class="value">--</div>
                    </div>
                </div>
                <button class="btn-confirm" onclick="confirmType()">‚úì TYPE —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</button>
            </div>

            <!-- GUITAR/BASS Switch -->
            <div class="parameter-group">
                <div class="param-header">
                    <h3>2Ô∏è‚É£ GUITAR/BASS Switch</h3>
                </div>
                <div class="param-values">
                    <div class="value-box">
                        <label>–¢–µ–∫—É—â–∏–π:</label>
                        <div id="current-mode" class="value">GUITAR</div>
                    </div>
                    <div class="arrow-indicator" id="mode-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                    <div class="value-box target">
                        <label>–¶–µ–ª–µ–≤–æ–π:</label>
                        <div id="target-mode" class="value">--</div>
                    </div>
                </div>
                <button class="btn-confirm" onclick="confirmMode()">‚úì –†–µ–∂–∏–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</button>
            </div>

            <!-- –†—É—á–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="knobs-grid">
                <!-- VARIATION -->
                <div class="knob-container">
                    <h4>VARIATION</h4>
                    <div class="knob-visual">
                        <svg viewBox="0 0 200 200" class="knob-svg">
                            <circle cx="100" cy="100" r="80" fill="#2c3e50" stroke="#34495e" stroke-width="4"/>
                            <line id="variation-current" x1="100" y1="100" x2="100" y2="40" stroke="#e74c3c" stroke-width="6" stroke-linecap="round"/>
                            <line id="variation-target" x1="100" y1="100" x2="100" y2="40" stroke="#2ecc71" stroke-width="4" stroke-linecap="round" opacity="0.7"/>
                        </svg>
                    </div>
                    <div class="knob-values">
                        <span>–¢–µ–∫—É—â–µ–µ: <strong id="variation-current-val">1</strong></span>
                        <span class="arrow-text" id="variation-arrow">‚Üí</span>
                        <span>–¶–µ–ª–µ–≤–æ–µ: <strong id="variation-target-val">--</strong></span>
                    </div>
                    <input type="range" id="variation-slider" min="1" max="11" value="1" class="slider">
                </div>

                <!-- TONE/RATE -->
                <div class="knob-container">
                    <h4>TONE/RATE</h4>
                    <div class="knob-visual">
                        <svg viewBox="0 0 200 200" class="knob-svg">
                            <circle cx="100" cy="100" r="80" fill="#2c3e50" stroke="#34495e" stroke-width="4"/>
                            <line id="tone-current" x1="100" y1="100" x2="100" y2="40" stroke="#e74c3c" stroke-width="6" stroke-linecap="round"/>
                            <line id="tone-target" x1="100" y1="100" x2="100" y2="40" stroke="#2ecc71" stroke-width="4" stroke-linecap="round" opacity="0.7"/>
                        </svg>
                    </div>
                    <div class="knob-values">
                        <span>–¢–µ–∫—É—â–µ–µ: <strong id="tone-current-val">5</strong></span>
                        <span class="arrow-text" id="tone-arrow">‚Üí</span>
                        <span>–¶–µ–ª–µ–≤–æ–µ: <strong id="tone-target-val">--</strong></span>
                    </div>
                    <input type="range" id="tone-slider" min="0" max="10" value="5" class="slider">
                </div>

                <!-- DEPTH -->
                <div class="knob-container">
                    <h4>DEPTH</h4>
                    <div class="knob-visual">
                        <svg viewBox="0 0 200 200" class="knob-svg">
                            <circle cx="100" cy="100" r="80" fill="#2c3e50" stroke="#34495e" stroke-width="4"/>
                            <line id="depth-current" x1="100" y1="100" x2="100" y2="40" stroke="#e74c3c" stroke-width="6" stroke-linecap="round"/>
                            <line id="depth-target" x1="100" y1="100" x2="100" y2="40" stroke="#2ecc71" stroke-width="4" stroke-linecap="round" opacity="0.7"/>
                        </svg>
                    </div>
                    <div class="knob-values">
                        <span>–¢–µ–∫—É—â–µ–µ: <strong id="depth-current-val">5</strong></span>
                        <span class="arrow-text" id="depth-arrow">‚Üí</span>
                        <span>–¶–µ–ª–µ–≤–æ–µ: <strong id="depth-target-val">--</strong></span>
                    </div>
                    <input type="range" id="depth-slider" min="0" max="10" value="5" class="slider">
                </div>

                <!-- EFFECT -->
                <div class="knob-container">
                    <h4>EFFECT</h4>
                    <div class="knob-visual">
                        <svg viewBox="0 0 200 200" class="knob-svg">
                            <circle cx="100" cy="100" r="80" fill="#2c3e50" stroke="#34495e" stroke-width="4"/>
                            <line id="effect-current" x1="100" y1="100" x2="100" y2="40" stroke="#e74c3c" stroke-width="6" stroke-linecap="round"/>
                            <line id="effect-target" x1="100" y1="100" x2="100" y2="40" stroke="#2ecc71" stroke-width="4" stroke-linecap="round" opacity="0.7"/>
                        </svg>
                    </div>
                    <div class="knob-values">
                        <span>–¢–µ–∫—É—â–µ–µ: <strong id="effect-current-val">5</strong></span>
                        <span class="arrow-text" id="effect-arrow">‚Üí</span>
                        <span>–¶–µ–ª–µ–≤–æ–µ: <strong id="effect-target-val">--</strong></span>
                    </div>
                    <input type="range" id="effect-slider" min="0" max="10" value="5" class="slider">
                </div>

                <!-- DIRECT -->
                <div class="knob-container">
                    <h4>DIRECT</h4>
                    <div class="knob-visual">
                        <svg viewBox="0 0 200 200" class="knob-svg">
                            <circle cx="100" cy="100" r="80" fill="#2c3e50" stroke="#34495e" stroke-width="4"/>
                            <line id="direct-current" x1="100" y1="100" x2="100" y2="40" stroke="#e74c3c" stroke-width="6" stroke-linecap="round"/>
                            <line id="direct-target" x1="100" y1="100" x2="100" y2="40" stroke="#2ecc71" stroke-width="4" stroke-linecap="round" opacity="0.7"/>
                        </svg>
                    </div>
                    <div class="knob-values">
                        <span>–¢–µ–∫—É—â–µ–µ: <strong id="direct-current-val">5</strong></span>
                        <span class="arrow-text" id="direct-arrow">‚Üí</span>
                        <span>–¶–µ–ª–µ–≤–æ–µ: <strong id="direct-target-val">--</strong></span>
                    </div>
                    <input type="range" id="direct-slider" min="0" max="10" value="5" class="slider">
                </div>
            </div>
        </section>

        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å -->
        <section class="progress-section">
            <h2>üìà –ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
            <div id="progress-text" class="progress-text">0/7 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ (0%)</div>
            <div id="completion-message" class="completion-message hidden">
                üéâ –ü—Ä–µ—Å–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–¥–µ–∞–ª—å–Ω–æ! –ú–æ–∂–µ—Ç–µ –∏–≥—Ä–∞—Ç—å!
            </div>
        </section>

        <!-- –§—É—Ç–µ—Ä -->
        <footer>
            <p>üé∏ Boss SY-1 Preset Tuner | Real-time –≤–µ—Ä—Å–∏—è —á–µ—Ä–µ–∑ –º–∏–∫—Ä–æ—Ñ–æ–Ω</p>
            <p><a href="https://github.com/biolink23-sketch/boss-sy1-pwa" target="_blank">
                <i class="fab fa-github"></i> GitHub
            </a></p>
        </footer>
    </div>

    <script src="presets.js"></script>
    <script src="app.js"></script>
</body>
</html>
